<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Lian-MCP-LLM Agent &#x7cfb;&#x7edf;</title>
    <style>
      /* From extension vscode.github */
      /*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

      .vscode-dark img[src$="\#gh-light-mode-only"],
      .vscode-light img[src$="\#gh-dark-mode-only"],
      .vscode-high-contrast:not(.vscode-high-contrast-light)
        img[src$="\#gh-light-mode-only"],
      .vscode-high-contrast-light img[src$="\#gh-dark-mode-only"] {
        display: none;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI",
          system-ui, "Ubuntu", "Droid Sans", sans-serif;
        font-size: 14px;
        line-height: 1.6;
      }
    </style>
    <style>
      .task-list-item {
        list-style-type: none;
      }

      .task-list-item-checkbox {
        margin-left: -20px;
        vertical-align: middle;
        pointer-events: none;
      }
    </style>
    <style>
      :root {
        --color-note: #0969da;
        --color-tip: #1a7f37;
        --color-warning: #9a6700;
        --color-severe: #bc4c00;
        --color-caution: #d1242f;
        --color-important: #8250df;
      }
    </style>
    <style>
      @media (prefers-color-scheme: dark) {
        :root {
          --color-note: #2f81f7;
          --color-tip: #3fb950;
          --color-warning: #d29922;
          --color-severe: #db6d28;
          --color-caution: #f85149;
          --color-important: #a371f7;
        }
      }
    </style>
    <style>
      .markdown-alert {
        padding: 0.5rem 1rem;
        margin-bottom: 16px;
        color: inherit;
        border-left: 0.25em solid #888;
      }

      .markdown-alert > :first-child {
        margin-top: 0;
      }

      .markdown-alert > :last-child {
        margin-bottom: 0;
      }

      .markdown-alert .markdown-alert-title {
        display: flex;
        font-weight: 500;
        align-items: center;
        line-height: 1;
      }

      .markdown-alert .markdown-alert-title .octicon {
        margin-right: 0.5rem;
        display: inline-block;
        overflow: visible !important;
        vertical-align: text-bottom;
        fill: currentColor;
      }

      .markdown-alert.markdown-alert-note {
        border-left-color: var(--color-note);
      }

      .markdown-alert.markdown-alert-note .markdown-alert-title {
        color: var(--color-note);
      }

      .markdown-alert.markdown-alert-important {
        border-left-color: var(--color-important);
      }

      .markdown-alert.markdown-alert-important .markdown-alert-title {
        color: var(--color-important);
      }

      .markdown-alert.markdown-alert-warning {
        border-left-color: var(--color-warning);
      }

      .markdown-alert.markdown-alert-warning .markdown-alert-title {
        color: var(--color-warning);
      }

      .markdown-alert.markdown-alert-tip {
        border-left-color: var(--color-tip);
      }

      .markdown-alert.markdown-alert-tip .markdown-alert-title {
        color: var(--color-tip);
      }

      .markdown-alert.markdown-alert-caution {
        border-left-color: var(--color-caution);
      }

      .markdown-alert.markdown-alert-caution .markdown-alert-title {
        color: var(--color-caution);
      }
    </style>
  </head>
  <body class="vscode-body vscode-light">
    <h1 id="lian-mcp-llm-agent-ç³»ç»Ÿ">Lian-MCP-LLM Agent ç³»ç»Ÿ</h1>
    <h5 id="æœ¬åœ°å¤šä¸“å®¶æ™ºèƒ½ä½“è°ƒåº¦ç³»ç»Ÿ--å·¥å…·è°ƒç”¨åè®®ç®¡ç†--å¯æ‰©å±•çŸ¥è¯†åº“">
      æœ¬åœ°å¤šä¸“å®¶æ™ºèƒ½ä½“è°ƒåº¦ç³»ç»Ÿ + å·¥å…·è°ƒç”¨åè®®ç®¡ç† + å¯æ‰©å±•çŸ¥è¯†åº“
    </h5>
    <p>By - Lian - 2025</p>
    <hr />
    <h2 id="é¡¹ç›®æ ¸å¿ƒ">é¡¹ç›®æ ¸å¿ƒ</h2>
    <h4 id="-é¡¶å±‚å¤šä¸“å®¶åä½œä¸è°ƒåº¦-è®ºæ–‡äº®ç‚¹">
      | é¡¶å±‚ï¼šå¤šä¸“å®¶åä½œä¸è°ƒåº¦ (è®ºæ–‡äº®ç‚¹)
    </h4>
    <p>åŒ…æ‹¬ï¼š</p>
    <ol>
      <li>
        <p><strong>ä¸“å®¶è‡ªåŠ¨ç”Ÿæˆï¼ˆAuto-spawn agentsï¼‰</strong></p>
        <p>
          ç®¡ç†å‘˜ LLM ä¼šæ ¹æ®ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ n ä¸ªä¸“å®¶ -&gt; ä¸“å®¶æ‹¥æœ‰è§’è‰²æ ‡ç­¾ï¼ˆRoleï¼‰
          -&gt; ä¸“å®¶æœ‰ç”Ÿå‘½å‘¨æœŸï¼ˆcreate â†’ run â†’ exitï¼‰
        </p>
      </li>
      <li>
        <p><strong>ç®¡ç†å‘˜ LLM çš„èŒè´£</strong></p>
        <p>ç®¡ç†å‘˜ä¸æ˜¯æ‰§è¡Œè€…ï¼Œå®ƒæ˜¯è°ƒåº¦ä¸­å¿ƒï¼š</p>
        <p>
          æ¥æ”¶ç”¨æˆ·è¾“å…¥ -&gt; åˆ†è§£ä»»åŠ¡ -&gt; è°ƒåº¦ä¸åŒä¸“å®¶ -&gt; è·¯ç”±æ¶ˆæ¯ -&gt;
          æ§åˆ¶å“ªäº›ä¸“å®¶è¢«æ€æ­»ã€å“ªäº›è¢«åˆ›å»º -&gt; æœ€åæ”¶æ•›æ‰€æœ‰ä¸“å®¶çš„è¾“å‡ºï¼Œè¿”å›ç»“æœ
        </p>
      </li>
      <li>
        <p><strong>ä¸“å®¶é—´çš„é€šä¿¡åè®®ï¼ˆAgent â†’ Agent, Agent â†’ Adminï¼‰</strong></p>
        <p>â€œéœ€è¦ä¸€ä¸ªæ˜ç¡®çš„è·¯ç”±ã€ç®¡ç†è§„åˆ™â€</p>
        <p>ä¾‹å¦‚ï¼š</p>
        <ul>
          <li>
            <p>è¯·æ±‚ç±»å‹ï¼šè¯¢é—®ã€åä½œã€è¯„ä¼°</p>
          </li>
          <li>
            <p>æ•°æ®æ ¼å¼ï¼šJSON schema</p>
          </li>
          <li>
            <p>ID æ ‡è¯†ï¼šsession_idã€agent_id</p>
          </li>
          <li>
            <p>ç®¡ç†å‘˜å†³å®šæ¯æ¬¡è¿­ä»£çš„åŠ¨ä½œ</p>
          </li>
        </ul>
      </li>
    </ol>
    <hr />
    <h2 id="å¼€å‘è¿›åº¦">å¼€å‘è¿›åº¦</h2>
    <h4 id="-æ•°æ®åº“---done--">| æ•°æ®åº“ --done--</h4>
    <p>
      ä½¿ç”¨ <code>PostgreSQL</code>, åŸºäº <code>Pydantic</code> çš„ ORM å°è£…å·²å®Œæˆ
    </p>
    <h5 id="sql-æ¨¡å—---done--">SQL æ¨¡å— --done--</h5>
    <p>å®Œå…¨è‡ªç ”çš„è½»é‡çº§ ORM ç³»ç»Ÿ, ç›®å‰å·²ç»æ”¯æŒ:</p>
    <ul>
      <li>åŸºäº Pydantic çš„æ¨¡å‹å®šä¹‰å’Œæ•°æ®éªŒè¯</li>
      <li>å®Œæ•´çš„ CRUD æ“ä½œ (Create, Read, Update, Delete)</li>
      <li>Python ç«¯å¤–é”®å…³ç³»æŠ½è±¡ (ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€)</li>
      <li>å…³ç³»æŸ¥è¯¢ (æ‰¹é‡åŠ è½½å…³è”å¯¹è±¡, é¿å… N+1 é—®é¢˜)</li>
      <li>JOIN å¤šè¡¨è”åˆæŸ¥è¯¢ (INNER, LEFT, RIGHT, FULL)</li>
      <li>è¿æ¥æ± ç®¡ç†, è‡ªåŠ¨é‡è¿æœºåˆ¶</li>
      <li>SQL æ–‡ä»¶è§£æ, è‡ªåŠ¨æå–è¡¨ç»“æ„å…ƒæ•°æ®</li>
      <li>æšä¸¾ç±»å‹æ”¯æŒ, JSON/JSONB å­—æ®µå¤„ç†</li>
      <li>çº§è”åˆ é™¤, äº‹åŠ¡æ”¯æŒ</li>
    </ul>
    <h5 id="æµ‹è¯•å¥—ä»¶">æµ‹è¯•å¥—ä»¶</h5>
    <p>
      è¿æ¥æµ‹è¯•:
      <code>uv run python ./tests/sql_connect.test.py</code> å…³ç³»åŠŸèƒ½æµ‹è¯•:
      <code>uv run python ./tests/test_relations.py</code> å®Œæ•´åŠŸèƒ½æµ‹è¯•
      (å­¦ä¹ æ–‡æ¡£): <code>uv run python ./tests/test_sql_complete.py</code>
    </p>
    <p><strong>æ–‡æ¡£</strong></p>
    <p><a href="mylib/sql/docs/sql.html">SQL æ¨¡å—ä½¿ç”¨æ–‡æ¡£</a> (ç‚¹å‡»è·³è½¬)</p>
    <p><a href="mylib/sql/docs/Model.html">æ•°æ®æ¨¡å‹ç³»ç»Ÿæ–‡æ¡£</a> (ç‚¹å‡»è·³è½¬)</p>
    <p><a href="mylib/sql/docs/DBRepo.html">ä»“åº“å±‚ API æ–‡æ¡£</a> (ç‚¹å‡»è·³è½¬)</p>
    <p><a href="mylib/sql/docs/Config.html">é…ç½®è¯´æ˜</a> (ç‚¹å‡»è·³è½¬)</p>
    <h4 id="-mcp-åŒ…---done--">| mcp åŒ… --done--</h4>
    <p>åŸºäº FastAPI å®ç°çš„å·¥å…·èšåˆæœåŠ¡å™¨ï¼Œæä¾›ç»Ÿä¸€çš„å·¥å…·å‘ç°ä¸è°ƒç”¨æ¥å£</p>
    <h5 id="æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</h5>
    <ul>
      <li><strong>å·¥å…·ç®¡ç†</strong>: è‡ªåŠ¨å‘ç°å’ŒåŠ è½½å·¥å…·æ¨¡å—ï¼Œæ”¯æŒçƒ­é‡è½½</li>
      <li><strong>RESTful API</strong>: æä¾›å®Œæ•´çš„å·¥å…·æŸ¥è¯¢ã€è°ƒç”¨æ¥å£</li>
      <li>
        <strong>å…ƒæ•°æ®æå–</strong>:
        è‡ªåŠ¨ä»å·¥å…·ä»£ç ä¸­æå–å‡½æ•°ç­¾åã€å‚æ•°ç±»å‹ã€æ–‡æ¡£è¯´æ˜
      </li>
      <li>
        <strong>å·¥å…·åˆ†ç±»</strong>:
        <ul>
          <li><code>file_tool</code>: æ–‡ä»¶è¯»å†™ã€å¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ç­‰æ“ä½œ</li>
          <li><code>dir_tool</code>: ç›®å½•åˆ›å»ºã€åˆ—è¡¨ã€æ ‘å½¢å±•ç¤ºã€ç»Ÿè®¡ä¿¡æ¯</li>
          <li>
            <code>web_tool</code>: HTTP è¯·æ±‚ã€ç½‘é¡µå†…å®¹æå–ã€HTML/JSON è§£æ
          </li>
        </ul>
      </li>
    </ul>
    <h5 id="api-ç«¯ç‚¹">API ç«¯ç‚¹</h5>
    <ul>
      <li><code>GET /</code>: æœåŠ¡çŠ¶æ€</li>
      <li><code>GET /tools</code>: è·å–æ‰€æœ‰å¯ç”¨å·¥å…·åˆ—è¡¨</li>
      <li><code>GET /tools/{tool_name}</code>: è·å–å·¥å…·è¯¦ç»†ä¿¡æ¯</li>
      <li><code>POST /tools/{tool_name}/call</code>: è°ƒç”¨æŒ‡å®šå·¥å…·</li>
      <li><code>POST /tools/reload</code>: çƒ­é‡è½½å·¥å…·å…ƒæ•°æ®</li>
    </ul>
    <h5 id="å¯åŠ¨æ–¹å¼">å¯åŠ¨æ–¹å¼</h5>
    <p><strong>ç”Ÿäº§æ¨¡å¼</strong>ï¼ˆæ™®é€šå¯åŠ¨ï¼‰:</p>
    <pre><code class="language-bash">uv run python ./main.py server
<span class="hljs-comment"># è‡ªå®šä¹‰åœ°å€å’Œç«¯å£</span>
uv run python ./main.py server --host 127.0.0.1 --port 8888
</code></pre>
    <p><strong>å¼€å‘æ¨¡å¼</strong>ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼Œä»£ç ä¿®æ”¹è‡ªåŠ¨ç”Ÿæ•ˆï¼‰:</p>
    <pre><code class="language-bash">./start_server_dev.sh
<span class="hljs-comment"># æˆ–è‡ªå®šä¹‰å‚æ•°</span>
./start_server_dev.sh 127.0.0.1 8888
</code></pre>
    <p>
      æ–‡æ¡£: <a href="mylib/mcp/README.html">MCP Server API æ–‡æ¡£</a> (ç‚¹å‡»è·³è½¬)
    </p>
    <h4 id="-llm-åŒ…---done---ç­‰å¾…-core-å®Œæˆåè¿›è¡Œé‡æ„">
      | llm åŒ… --done-- (ç­‰å¾… Core å®Œæˆåè¿›è¡Œé‡æ„)
    </h4>
    <p>
      LLM å®¢æˆ·ç«¯å°è£…ï¼Œæ”¯æŒå¤šç§æ¨¡å‹æä¾›å•†ä¸å·¥å…·è°ƒç”¨ (ç›®å‰æµ‹è¯•ä½¿ç”¨ deepseek-chat)
    </p>
    <h5 id="æ ¸å¿ƒåŠŸèƒ½-1">æ ¸å¿ƒåŠŸèƒ½</h5>
    <ul>
      <li>
        <strong>å·¥å…·è°ƒç”¨</strong>: è‡ªåŠ¨é›†æˆ MCP Server å·¥å…·ï¼Œæ”¯æŒ function
        calling
      </li>
      <li>
        <strong>è¿ç»­è°ƒç”¨</strong>: æ”¯æŒå·¥å…·çš„å¤šè½®è¿ç»­è°ƒç”¨ï¼Œç›´åˆ° LLM è¿”å›
        <code>TOOL_CALL_END</code>
      </li>
      <li><strong>å¯¹è¯ç®¡ç†</strong>: å®Œæ•´çš„å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†å’Œå†å²è®°å½•</li>
      <li><strong>åŒç•Œé¢</strong>: ç»ˆç«¯äº¤äº’å¼ç•Œé¢ + Streamlit Web UI</li>
    </ul>
    <h5 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼</h5>
    <p><strong>ç»ˆç«¯å®¢æˆ·ç«¯</strong>ï¼ˆäº¤äº’å¼å‘½ä»¤è¡Œï¼‰:</p>
    <pre><code class="language-bash">uv run python ./main.py client
</code></pre>
    <p><strong>Web UI</strong>ï¼ˆStreamlit ç½‘é¡µç•Œé¢ï¼‰:</p>
    <pre><code class="language-bash">uv run python ./main.py web
</code></pre>
    <p>Web UI ç‰¹æ€§:</p>
    <ul>
      <li>ğŸ“± å·¦å³åˆ†æ å¸ƒå±€ï¼šå·¦ä¾§å¯¹è¯ï¼Œå³ä¾§å®æ—¶æ—¥å¿—</li>
      <li>ğŸ¨ ç¾è§‚çš„æ¶ˆæ¯æ°”æ³¡æ ·å¼</li>
      <li>ğŸ“Š å¯è§†åŒ–å·¥å…·è°ƒç”¨æµç¨‹</li>
      <li>ğŸ”„ å®æ—¶æ˜¾ç¤ºå·¥å…·æ‰§è¡Œè¿›åº¦</li>
      <li>ğŸ“š ä¾§è¾¹æ æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å·¥å…·</li>
    </ul>
    <p>
      ç¯å¢ƒé…ç½®: éœ€è¦åœ¨ <code>mylib/llm/llm_config.toml</code> å¡«å…¥
      <code>DEEPSEEK_API_KEY</code> å’Œ MCP Server åœ°å€
    </p>
    <h4 id="-config-åŒ…---done--">| Config åŒ… --done--</h4>
    <p>ç”¨äºé…ç½®åŠ è½½, å·²ç»å®Œå¤‡</p>
    <p>æµ‹è¯•: <code>uv run python ./tests/config.test.py</code></p>
    <p>
      æ–‡æ¡£
      <a href="mylib/config/docs/UserGuide.html">UserGuide.md</a> (ç‚¹å‡»è·³è½¬)
    </p>
    <h4 id="-utils-åŒ…">| utils åŒ…</h4>
    <h6 id="ç›®å‰å®ç°çš„åŒ…">ç›®å‰å®ç°çš„åŒ…</h6>
    <h5 id="printer---done--">Printer --done--</h5>
    <p>æä¾›äº†ä¸€ä¸ªå½©è‰²æ‰“å°æ–¹æ³•</p>
    <h5 id="loutput---done--">Loutput --done--</h5>
    <p>åŸºäº <code>Printer</code> å®Œå…¨é‡æ„, ç›®å‰å·²ç»æ”¯æŒ:</p>
    <ul>
      <li>åŸºäº ANSI çš„æ–‡å­—æ•ˆæœ, æ–‡å­—è‰²å½©, èƒŒæ™¯è‰²å½©æ˜¾ç¤º</li>
      <li>æ”¯æŒ 256 è‰², rgb 24bit è‰²å½©</li>
      <li>æ”¯æŒå°† ANSI ä»£ç è½¬æ¢ä¸º rgb çœŸå½©è‰²æ˜¾ç¤º</li>
    </ul>
    <p>
      æ•ˆæœé¢„è§ˆ:
      <code>uv run python ./tests/utils_Loutput/Loutput.test.py</code>
      å¯¹æ¯”ç»ˆç«¯é¢œè‰²ä¸çœŸå½©è‰²:
      <code>uv run python ./tests/utils_Loutput/color_comparison.py</code>
      æµ‹è¯•<code>RGBColor</code>:
      <code>uv run python .tests/utils_Loutput/rgb_quick.py</code>
    </p>
    <p>æ–‡æ¡£</p>
    <p>
      <a href="mylib/utils/Loutput/docs/Loutput.html">Loutput ä½¿ç”¨æ–‡æ¡£</a>
      (ç‚¹å‡»è·³è½¬)
    </p>
    <p>
      <a href="mylib/utils/Loutput/docs/ColorGuide.html">ç»ˆç«¯é¢œè‰²æ˜¾ç¤ºæŒ‡å—</a>
      (ç‚¹å‡»è·³è½¬)
    </p>
    <p>
      <a href="mylib/utils/Loutput/docs/RGBColor.html">RGBColor ä½¿ç”¨æŒ‡å—</a>
      (ç‚¹å‡»è·³è½¬)
    </p>
    <hr />
    <h2 id="-å­¦æœ¯ä½¿ç”¨å£°æ˜">ğŸ“ å­¦æœ¯ä½¿ç”¨å£°æ˜</h2>
    <p><strong>æœ¬é¡¹ç›®ä¸º 2025 å±Šæ¯•ä¸šè®¾è®¡ä½œå“</strong></p>
    <p>âš ï¸ <strong>é‡è¦æé†’</strong>ï¼š</p>
    <ul>
      <li>ä¿æŠ¤æœŸï¼š2025 å¹´ 11 æœˆ 10 æ—¥ - 2026 å¹´ 1 æœˆ 19 æ—¥</li>
      <li>åœ¨æ­¤æœŸé—´ï¼Œç¦æ­¢åŒæ ¡åŒå­¦ä½¿ç”¨æœ¬é¡¹ç›®è¿›è¡Œæ¯•ä¸šè®¾è®¡</li>
      <li>ç¦æ­¢ä»»ä½•å½¢å¼çš„å­¦æœ¯ä½œä¸šæäº¤</li>
      <li>è¯¦ç»†æ¡æ¬¾è¯·å‚é˜… LICENSE æ–‡ä»¶</li>
    </ul>
    <hr />
  </body>
</html>
